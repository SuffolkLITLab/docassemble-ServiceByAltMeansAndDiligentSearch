---
include:
  - docassemble.MAVirtualCourt:basic-questions.yml
  - alternative_means_diligent_search.yml
  - user_information.yml
  - search_questions.yml
  - review_screens.yml
---
#comment: about the case
---
id: open case
question: | 
  % if user_is == False:
  Do you already have a case in the Probate and Family Court?
  % else:
  Is this related to an open case in the Probate and Family Court?
  % endif 
yesno: open_case
---
id: docket number
question: |
  What is the docket number for your case? 
list collect: True
fields:
  - 'no label': docket_numbers[i]
---
id: case name 
reconsider: True
code: |
  ask_case = users[0].name.first + ' ' + users[0].name.last + ' ' + 'vs.' + ' ' + other_parties[0].name.first + ' ' + other_parties[0].name.last
---
id: case name
question: |
  Is this the name of your case?
subquestion: | 
  ${ ask_case }
yesno: correct_case_name
--- 
id: reask 
question: | 
  If the name of your case is **not** *${ ask_case }*, what is the name of your case? 
fields: 
 - no label: correct_case
---
id: edit case
question: | 
  What is the name of your case? 
fields:
 - 'no label': case_name
   show if: 
     variable: correct_case_name 
     is: False
---
id: names of opposing parties
question: |
  What the name of the **defendant** or respondent in this
  case?
fields:
  - First name: other_parties[0].name.first
  - Middle Name: other_parties[0].name.middle
    required: False
  - Last name: other_parties[0].name.last
  - Suffix: other_parties[0].name.suffix
    code: |
      name_suffix()
    required: False      
---
id: defendant last known address
generic object: Individual
question: |
  What is ${ x.possessive('last known address') }?
fields:
  - Address unknown: address_unknown
    datatype: yesnowide
  - Street address: defendant.address.address
    address autocomplete: True
  - Unit: defendant.address.unit
    required: False
  - City: defendant.address.city
  - State: defendant.address.state
    default: MA   
    code: |
      states_list()   
  - Zip: defendant.address.zip
    required: False
---
id: date defendant last lived at address 
question: |
  When did  ${ other_parties[0].name } last live at ${ other_parties[0].address } ?
subquestion: |
  This can be a guess or the exact date 
fields:
  - 'I do not know the exact date': do_not_know
    datatype: yesno
  - '${ other_parties[0].name } last lived at ${ other_parties[0].address } ': date_last_known
    datatype: date
    show if: 
      variable: do_not_know
      is: False
  - 'Best guess when ${ other_parties[0].name } last lived at ${ other_parties[0].address }': date_last_known
    show if:
      variable: do_not_know
      is: True
---
id: ask court
continue button field:         
  What_would_you_like_to_request_the_court_allow_you_to_do
question: |
  What would you like to ask the court allow you to do?
fields:
  - no label: service_request
    input type: radio
    choices: 
      - Provide service by publication in the newspaper: publication_only
      - Provide service by publication in the newspaper and mailing the defendant: publication_mail
      - Provide service by other means not prohibited by law: other_means
  - I would like to provide service: means_specified
    show if:
      variable: service_request 
      is: other_means
    input type: radio 
    choices: 
      - Specify service: specify_service
      - Instruct me on service: instruct_service
  - Specify info: specify_info
    show if: 
      variable: means_specified
      is: specify_service
---
include:
  - docassemble.MAVirtualCourt:basic-questions.yml
  - user_information.yml
  - about_the_case.yml
  - search_questions.yml
  - review_screens.yml
---
comment: |
  The metadata section controls the tab title and saved interview title. You can delete this section if you include this YAML file in another YAML file.
metadata:
  title: |
   For Permission to Provide Service By Alternate Means
  short title: |
    Service by Alternate Means and Diligent Search
---
comment: |
  This section is used by MAVirtualCourts to control how some of the questions work.
mandatory: True
code: |
  interview_metadata # make sure we initialize the object
  if not defined("interview_metadata['service_by_alternate_means_diligent_search']"):
    interview_metadata.initializeObject('service_by_alternate_means_diligent_search')
  interview_metadata['service_by_alternate_means_diligent_search'].update({
    'title': 'motion to provide service by alternate means',
    'short title': 'for permission to provide service by alternate means',
    'description': 'If the sheriff could not serve the defendant with a Divorce / Separate Support Summons in person or if you do not know where the Defendant lives, ask the court for an order for Alternate Service by Publication and Mailing. This order tells you to publish the summons in the newspaper and mail the summons and complaint to the defendant at the last address you have for him or her.',
    'original_form': 'https://www.masslegalhelp.org/family/cjp31-motion-for-service-by-alternate-means-and-affidavit-of-diligent-search-sample.pdf',
    'allowed courts': [
      'Probate and Family Court',
    ],
    'categories': [
      'Family Law',
    ],
    'logic block variable': 'service_by_alternate_means_diligent_search',
    'attachment block variable': 'service_by_alternate_means_diligent_search_attachment',
    'typical role': 'plaintiff',
  })

---
features: 
  navigation: True
---
sections:
  - review_service_by_alternate_means_diligent_search: Review your answers
---
mandatory: True
id: order block
code: |
  # This is a placeholder to control logic flow in this interview

  basic_questions_intro_screen 
  service_by_alternate_means_diligent_search_intro
  # Set the preferred/allowed courts for this interview
  allowed_courts = interview_metadata["service_by_alternate_means_diligent_search"]["allowed courts"]
  nav.set_section('review_service_by_alternate_means_diligent_search')
  users.there_is_another
  BBO_number
  docket_number
  case_name
  publication_only
  user_ask_role = 'plaintiff'
  users[0].name.first
  str(users[0])
  users[0].address.city
  users[0].phone_number
  users[0].email
  str(defendants[0])
  defendants[0].address.address
  date_last_known
  last_contact_date
  check_phone_text
  defendants[0].phone_number
  defendants[0].email
  phone_response
  email_response
  social_media_site1
  website_name1
  friend_contacted1
  sheriff_check
  str(courts[0])
  courts[0].division
  signature_date
  service_by_alternate_means_diligent_search_preview_question # Pre-canned preview screen
  basic_questions_signature_flow
  users[0].signature
  service_by_alternate_means_diligent_search = True

---
objects:
  - service_by_alternate_means_diligent_search_attachment: DADict
---
attachment:
    variable name: service_by_alternate_means_diligent_search_attachment[i]
    name: Service by Alternate Means and Diligent Search
    filename: Service_by_Alternate_Means_and_Diligent_Search
    skip undefined: True
    pdf template file: service_by_alternate_means_diligent_search.pdf
    fields: 
      - "docket_number": ${ docket_number }
      - "court_name": ${ str(courts[0]) }
      - "court_division": ${ courts[0].division }
      - "defendant_name": ${ str(defendants[0]) }
      - "address_unknown": ${ address_unknown }
      - "defendant_address_street": ${ defendants[0].address.address }
      - "defendant_address_unit": ${users[0].address_unit}
      - "defendant_city": ${defendants[0].address.city}
      - "defendant_state": ${defendants[0].address.state}
      - "defendant_zip": ${defendants[0].address.zip}
      - "defendant_phone": ${ defendants[0].phone_number }
      - "defendant_phone": ${ defendants[0].phone_number }
      - "defendant_email": ${ defendants[0].email }
      - "docket_number": ${ docket_number }
      - "docket_number": ${ docket_number }
      # If it is a signature, test which file version we're expecting. leave it empty unless it's the final attachment version
      - "user_signature": ${ users[0].signature if i == 'final' else '' }
      - "signature_date": ${ signature_date }
      - "user_name": ${ str(users[0]) }
      - "user_address": ${users[0].address.address }
      - "user_address_unit": ${users[0].address_unit}
      - "user_address_city": ${ users[0].address.city }
      - "user_address_state": ${ users[0].address.state }
      - "user_address_zip": ${ users[0].address.zip }
      - "user_phone": ${ users[0].phone_number }
      - "user_email": ${ users[0].email }
      - "case_name": ${ case_name }
      - "publication_only": ${ publication_only }
      - "publication_mail": ${ publication_mail }
      - "other_means": ${ other_means }
      - "specify_service": ${ specify_service }
      - "instruct_service": ${ instruct_service }
      - "specify_info": ${ specify_info }
      - "date_last_known": ${ date_last_known }
      - "last_contact_date": ${ last_contact_date }
      - "check_phone_text": ${ check_phone_text }
      - "phone_response": ${ phone_response }
      - "check_email": ${ check_email }
      - "email_response": ${ email_response }
      - "social_check": ${ social_check }
      - "social_media_site1": ${ social_media_site1 }
      - "social_date1": ${ social_date1 }
      - "social_response1": ${ social_response1 }
      - "social_media_site2": ${ social_media_site2 }
      - "social_date2": ${ social_date2 }
      - "social_response2": ${ social_response2 }
      - "internet_search_check": ${ internet_search_check }
      - "website_name1": ${ website_name1 }
      - "website_date1": ${ website_date1 }
      - "website_response1": ${ website_response1 }
      - "website_name2": ${ website_name2 }
      - "website_date2": ${ website_date2 }
      - "website_response2": ${ website_response2 }
      - "child_support_check": ${ child_support_check }
      - "friends_family_check": ${ friends_family_check }
      - "friend_contacted1": ${ friend_contacted1 }
      - "relationship_name1": ${ relationship_name1 }
      - "relationship_date1": ${ relationship_date1 }
      - "relationship_info1": ${ relationship_info1 }
      - "friend_contacted2": ${ friend_contacted2 }
      - "relationship_name2": ${ relationship_name2 }
      - "relationship_date2": ${ relationship_date2 }
      - "relationship_infor2": ${ relationship_infor2 }
      - "military_check": ${ military_check }
      - "other_contact_check": ${ other_contact_check }
      - "sheriff_check": ${ sheriff_check }
      - "no_attempt_check": ${ no_attempt_check }
      - "BBO_number": ${ BBO_number }
--- 
id: basic questions intro screen
question: |
  ${interview_short_title}: Mass Access Project
subquestion: |
 
  The MassAccess Project can help you complete and file court forms in 3 steps:
  
  Step 1. Answer questions that will fill in your form for you.  
  Step 2. Preview the completed form.  
  Step 3. Email the form to the court using this secure website and save copies
  for yourself for later reference.  

  Tap the {green words} in any screen for a definition or more information.
  
  If you have questions about this form or the court process, 
  call the Trial Courtâ€™s Emergency HelpLine:  
  833-91-COURT (833-912-6878)  
  Monday-Friday  
  8:30am - 4:30pm

  % if chat_partners_available().help:
  Live help is currently available in this interview. Click the speech bubble
  (:comment-alt:) in the navigation bar to connect to a live advocate for help.
  % endif

fields:
  - To continue, you must accept the [terms of use](https://massaccess.suffolklitlab.org/privacy/): acknowledged_information_use
    datatype: checkboxes
    none of the above: False    
    minlength: 1
    choices:
      - I accept the terms of use.
    validation messages:
      minlength: |
        You cannot continue unless you agree to the terms of use.        
continue button field: basic_questions_intro_screen
terms:
  green words: |
    Green words are legal terms or a short way of referring to something that needs more explanation. The definition or explanation pops up when you tap the green words.
right: |
  % if user_has_saved_answers:
  ${fa_icon("bell", color="primary", size="sm")}
  Saved answers available!  
  
  ${action_button_html(url_action('load_answer'), icon="folder-open", label=word("View answers"), size="sm" )}
  % endif 
---
comment: |
  This question is used to introduce your interview. Please customize
id: intro page
continue button field: service_by_alternate_means_diligent_search_intro
question: |
  Motion For Service By Alternate Means
subquestion: |
  If the sheriff could not serve the defendant with a Divorce / Separate Support Summons in person or if you do not know where the Defendant lives, ask the court for an order for Alternate Service by Publication and Mailing. This order tells you to publish the summons in the newspaper and mail the summons and complaint to the defendant at the last address you have for him or her.
---
id: Placeholder preview screen
continue button field: service_by_alternate_means_diligent_search_preview_question
question: |
  Placeholder preview screen
subquestion: |
  Here is a preview of the form you'll sign on the next page. 
  
   ${service_by_alternate_means_diligent_search_attachment['preview']}
---
progress: 100
mandatory: True
id: Placeholder download screen
question: |
  Placeholder download screen
subquestion: |
  Placeholder
  
  ### Next steps
  
  1. Step 1
  1. Step 2
  
  Below is a preview of your form.
  
  ${service_by_alternate_means_diligent_search_attachment['final'] }
need: service_by_alternate_means_diligent_search
attachment code: service_by_alternate_means_diligent_search_attachment['final']